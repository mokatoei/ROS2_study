`rclcpp::shutdown()` æ˜¯ ROS 2 C++ ä¸­ç”¨äº**ä¼˜é›…å…³é—­ ROS ç³»ç»Ÿ**çš„å‡½æ•°ï¼Œå¸¸ç”¨äºç¨‹åºç»“æŸå‰é‡Šæ”¾èµ„æºã€åœæ­¢å›è°ƒå¤„ç†ç­‰ã€‚

---

## ğŸ§  å®šä¹‰

```cpp
namespace rclcpp
{
  void shutdown();
}
```

ä¹Ÿå¯ä»¥å¸¦å‚æ•°å½¢å¼ï¼š

```cpp
void shutdown(const rclcpp::Context::SharedPtr & context);
```

---

## âœ… åŠŸèƒ½å’Œä½œç”¨

| åŠŸèƒ½        | æè¿°                                                            |
| --------- | ------------------------------------------------------------- |
| åœæ­¢ ROS èŠ‚ç‚¹ | ç»ˆæ­¢æ‰€æœ‰èŠ‚ç‚¹ã€è®¢é˜…è€…ã€å‘å¸ƒè€…ã€æœåŠ¡ç­‰èµ„æºçš„ç®¡ç†                                       |
| æ¸…ç†èµ„æº      | æ¸…é™¤ä¸­é—´ä»¶èµ„æºã€å…³é—­çº¿ç¨‹æ± ã€ç»ˆæ­¢äº‹ä»¶å¾ªç¯ç­‰                                         |
| é€šçŸ¥é€€å‡º      | `spin()`/`spin_some()`/`spin_until_future_complete()` ä¼šæ”¶åˆ°ä¸­æ–­ä¿¡å· |
| é˜²æ­¢å†…å­˜æ³„æ¼    | è‡ªåŠ¨é‡Šæ”¾ ROS æ‰€ç®¡ç†çš„æ‰€æœ‰å¥æŸ„å’Œå¯¹è±¡                                          |

---

## ğŸ“¦ å…¸å‹ä½¿ç”¨åœºæ™¯

1. **ä¸»ç¨‹åºç»“æŸå‰è°ƒç”¨**ï¼Œé‡Šæ”¾èµ„æºï¼š

   ```cpp
   int main() {
       rclcpp::init(argc, argv);
       auto node = rclcpp::Node::make_shared("demo");
       rclcpp::spin(node);
       rclcpp::shutdown();  // æ­£ç¡®é‡Šæ”¾èµ„æº
       return 0;
   }
   ```

2. **ä¿¡å·æ•æ‰ä¸­ä½¿ç”¨**ï¼ˆæ¯”å¦‚ Ctrl+Cï¼‰ï¼š

   ```cpp
   void signal_handler(int signum) {
       rclcpp::shutdown();  // ä¸­æ–­æ—¶å®‰å…¨é€€å‡º
   }
   ```

3. **å¤šçº¿ç¨‹ spin ä¸­æ­¢åˆ¤æ–­æ¡ä»¶**ï¼š

   ```cpp
   while (rclcpp::ok()) {
       executor.spin_some();
   }
   ```

---

## ğŸ¯ shutdown åçš„è¡Œä¸º

| æ“ä½œ                   | è¡Œä¸º                        |
| -------------------- | ------------------------- |
| `spin()`             | è‡ªåŠ¨é€€å‡º                      |
| `spin_some()`        | ä¸å†å¤„ç†å›è°ƒ                    |
| `create_publisher()` | æŠ›å¼‚å¸¸æˆ–æ— æ•ˆ                    |
| `ok()`               | è¿”å› false                  |
| `rclcpp::init()`     | å¦‚æœä¹‹å‰ shutdown è¿‡ï¼Œéœ€è¦é‡æ–° init |

---

## ğŸ§ª ç¤ºä¾‹æ¼”ç¤º

```cpp
int main(int argc, char **argv) {
    rclcpp::init(argc, argv);
    auto node = rclcpp::Node::make_shared("demo");

    std::thread t([] {
        std::this_thread::sleep_for(std::chrono::seconds(3));
        rclcpp::shutdown();  // æ¨¡æ‹Ÿ3ç§’åé€€å‡º
    });

    rclcpp::spin(node);  // è¢« shutdown è‡ªåŠ¨ç»ˆæ­¢
    t.join();
    return 0;
}
```

---

## ğŸ“Œ å°ç»“

| é¡¹ç›®   | æè¿°                    |
| ---- | --------------------- |
| ä¸»è¦ç”¨é€” | æ¸…ç†èµ„æºã€é€šçŸ¥æ‰€æœ‰ ROS å®ä¾‹é€€å‡º    |
| è°ƒç”¨æ—¶æœº | `spin()` ç»“æŸã€å¼‚å¸¸å¤„ç†ã€ä¿¡å·ä¸­æ–­ |
| æ˜¯å¦å¿…é¡» | æ˜¯ï¼Œå»ºè®®æ¯ä¸ª ROS ç¨‹åºç»“å°¾è°ƒç”¨     |
| å¤šæ¬¡è°ƒç”¨ | å®‰å…¨ï¼Œä½†å¤šæ¬¡æ— æ„ä¹‰             |

---
